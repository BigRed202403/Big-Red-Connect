<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Big Red Connect</title>

  <!-- ğŸ“± Home Screen & PWA Support -->
  <link rel="apple-touch-icon" href="icon.PNG">
  <link rel="icon" type="image/png" sizes="192x192" href="icon.png">
  <link rel="shortcut icon" href="icon.PNG">
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-title" content="Big Red Connect">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="theme-color" content="#000000">

  <!-- ğŸš« Disable caching -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- ğŸ¨ Styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- âœˆï¸ Google Maps (for quick destination box) -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCMM0dxLNM7XQI5G3OBSnINeO5hcS3Ks5I&libraries=places"></script>
</head>

<body>
  <!-- ğŸ Hero Banner -->
  <div class="hero"></div>

  <!-- ğŸš— Main Logo -->
  <img src="official_logo.jpeg" alt="Big Red Connect Logo" class="main-logo" />

  <!-- ğŸ·ï¸ Tagline -->
  <p class="tagline">Veteran Owned â€¢ Affordable Flat Rates â€¢ Trusted Local Connections</p>

  <!-- ğŸŸ¢ Status Pill (auto-updated via localStorage + status.js) -->
  <div id="status-pill" class="status status--loading">Checking statusâ€¦</div>

  <!-- ğŸ› ï¸ Status Control -->
  <div class="info-section" style="text-align:center;max-width:400px;">
    <label for="statusSelect" style="display:block;margin-bottom:8px;font-weight:600;">Update Driving Status:</label>
    <select id="statusSelect" class="btn secondary" style="width:100%;max-width:320px;padding:10px;">
      <option value="online">ğŸŸ¢ On the Road</option>
      <option value="away">ğŸŸ¡ Limited Availability</option>
      <option value="offline">ğŸ”´ Offline</option>
    </select>
    <button id="updateStatusBtn" class="btn primary" style="margin-top:12px;">ğŸ’¾ Save Status</button>
    <p style="font-size:0.9em;color:#aaa;margin-top:6px;">Use this main control page to update your visible driving status.</p>
  </div>

  <!-- ğŸ“² Quick Actions -->
  <div class="cta-group">
    <a href="sms:+14053784024" class="btn primary">ğŸ“² Text â€œREDâ€</a>
    <a href="tel:+14053784024" class="btn secondary">ğŸ“ Call Big Red</a>
  </div>

  <!-- ğŸ§­ Smart Destination -->
  <div class="info-section" style="text-align:center;margin-top:20px;">
    <h2 style="margin-bottom:10px;">Plan Your Connection</h2>
    <form id="quickDestination" onsubmit="goToFare(event)" style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
      <input id="quickWhere" type="text" placeholder="Where to?" required 
             style="flex:1;min-width:220px;max-width:400px;padding:12px;border-radius:10px;border:1px solid #333;background:#111;color:#fff;">
      <button type="submit" class="btn primary">â¡ï¸ Next</button>
    </form>
    <p style="font-size:0.9em;color:#888;margin-top:6px;">
      Tip: Start typing a place, business, or address â€” suggestions will appear.
    </p>
  </div>

  <!-- ğŸ”— Navigation Tiles -->
  <div class="tile-grid">
    <a href="farecalculator.html" class="tile">ğŸ’²<br>Fare Calculator</a>
    <a href="live.html" class="tile">ğŸ—ºï¸<br>Live Map</a>
    <a href="reviews.html" class="tile">â­<br>Rider Reviews</a>
    <a href="faq.html" class="tile">â„¹ï¸<br>FAQ & Info</a>
    <a href="https://www.facebook.com/share/1BWCx63CUt/?mibextid=wwXIfr" target="_blank" class="tile">ğŸ‘<br>Follow on Facebook</a>
  </div>

  <!-- â¤ï¸ Why Choose Red -->
  <section class="info-section">
    <h2>Why Choose Big Red Connect</h2>
    <ul>
      <li>Veteran-owned and operated â€” every connection is personal.</li>
      <li>Flat-rate, fair pricing with zero surprises.</li>
      <li>One trusted driver â€” no random apps or surge pricing.</li>
    </ul>
  </section>

  <!-- ğŸ¦¶ Footer -->
  <footer>
    <p>Questions or ride connection requests?<br>Text <strong>â€œREDâ€</strong> to (405) 378-4024.</p>
    <p><a href="faq.html">FAQ & Policies</a> | <a href="reviews.html">Leave a Review</a></p>
    <p>&copy; 2025 Big Red Connect</p>
    <p style="font-size:0.8em;color:#777;margin-top:10px;line-height:1.4;">
      Vehicle imagery features actual Big Red Connect fleet vehicles.<br>
      Some backgrounds created with AI-assisted design tools for illustrative purposes only.<br>
      Brand names (ChevroletÂ® and GMCÂ®) are property of their respective owners and used descriptively.
    </p>
  </footer>

  <!-- âš™ï¸ Status Logic -->
  <script>
    const statusSelect = document.getElementById("statusSelect");
    const saveBtn = document.getElementById("updateStatusBtn");
    const pill = document.getElementById("status-pill");

    // Load current status from localStorage
    const curStatus = localStorage.getItem("bigred_status") || "offline";
    const curTime = localStorage.getItem("bigred_status_time") || null;
    statusSelect.value = curStatus;
    updatePill(curStatus, curTime);

    function updatePill(state, time=null){
      const now = time ? new Date(time) : new Date();
      const stamp = now.toLocaleString("en-US", {
        month:"short", day:"numeric", hour:"numeric", minute:"2-digit"
      });
      pill.className = "status " + state;
      if(state==="online"){
        pill.textContent = `ğŸŸ¢ On the road â€” as of ${stamp}`;
      }else if(state==="away"){
        pill.textContent = `ğŸŸ¡ Limited Availability â€” as of ${stamp}`;
      }else{
        pill.textContent = `ğŸ”´ Offline â€” as of ${stamp}`;
      }
    }

    saveBtn.onclick = ()=>{
      const newStatus = statusSelect.value;
      const now = new Date().toISOString();
      localStorage.setItem("bigred_status", newStatus);
      localStorage.setItem("bigred_status_time", now);
      updatePill(newStatus, now);
      alert("âœ… Status updated successfully!");
      document.dispatchEvent(new CustomEvent("statusUpdated", { detail: newStatus }));
    };
  </script>

  <!-- âœˆï¸ Quick Destination Autocomplete -->
  <script>
    let whereAuto;
    function initQuickSearch() {
      whereAuto = new google.maps.places.Autocomplete(
        document.getElementById("quickWhere"),
        { fields: ["formatted_address", "name"] }
      );
    }
    function goToFare(e) {
      e.preventDefault();
      const dest = document.getElementById("quickWhere").value.trim();
      if (dest) {
        window.location.href = "farecalculator.html?dropoff=" + encodeURIComponent(dest);
      }
    }
    window.onload = initQuickSearch;
  </script>

</body>
</html>