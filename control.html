<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Big Red Connect ‚Äì Control Panel</title>
  <style>
    body {
      background:#000; color:#fff; font-family:'Segoe UI',Roboto,Arial,sans-serif;
      text-align:center; padding:30px; max-width:500px; margin:auto;
    }
    h1 { color:#c40000; margin-bottom:10px; }
    .subtitle { color:#aaa; margin-bottom:25px; }
    button {
      display:block; width:100%; margin:10px 0; padding:14px; font-size:1.1em;
      border:none; border-radius:8px; color:#fff; cursor:pointer; font-weight:600;
      transition:transform 0.1s ease;
    }
    button:hover { transform:scale(1.05); }
    .online { background:#28a745; }
    .away { background:#ffcc00; color:#000; }
    .offline { background:#c40000; }
    .log {
      margin-top:25px; background:#111; border:1px solid #333; border-radius:8px;
      padding:15px; font-size:0.95em; color:#ccc; text-align:left;
      max-height:200px; overflow:auto;
    }
    input {
      width:100%; margin-bottom:15px; padding:10px; border-radius:6px;
      border:1px solid #333; background:#111; color:#fff;
    }
  </style>
</head>
<body>
  <h1>Big Red Connect Control</h1>
  <div class="subtitle">Update your online / away / offline status</div>

  <!-- üîê Auth Key (matches Worker secret) -->
  <input id="auth" type="password" placeholder="Enter control key (BigRedPrivateKey2025)" />

  <!-- üîò Status Buttons -->
  <button class="online" onclick="setStatus('online')">üü¢ Go Online</button>
  <button class="away" onclick="setStatus('away')">üü° Set Away</button>
  <button class="offline" onclick="setStatus('offline')">üî¥ Go Offline</button>

  <div class="log" id="log">Ready.</div>

  <script>
    const WORKER_URL = "https://bigred-status-updater.bigredtransportation.workers.dev"; // replace with your Worker URL
    const LOG = document.getElementById("log");

    async function setStatus(mode) {
      const key = document.getElementById("auth").value.trim();
      if (!key) return alert("Enter your control key first.");

      const payload = {
        online: mode === "online",
        away: mode === "away",
        updated: new Date().toISOString()
      };

      try {
        const r = await fetch(WORKER_URL, {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
            "X-Auth-Token": key
          },
          body: JSON.stringify(payload)
        });

        if (!r.ok) throw new Error(await r.text());
        const data = await r.json();
        const msg = `‚úÖ Updated to ${mode.toUpperCase()} ‚Äî ${new Date().toLocaleTimeString()}`;
        LOG.textContent = msg + "\n" + JSON.stringify(data, null, 2);
        console.log(msg, data);
      } catch (err) {
        LOG.textContent = "‚ùå Update failed: " + err;
        console.error(err);
      }
    }
  </script>
</body>
</html>
