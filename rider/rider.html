<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Rider Hub ‚Äì Big Red Connect</title>

<link rel="apple-touch-icon" href="/icon.PNG">
<link rel="icon" type="image/png" sizes="192x192" href="/icon.png">
<link rel="shortcut icon" href="/icon.PNG">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#000">

<link rel="stylesheet" href="/style.css?v=1">

<style>
  body {
    background:#000;
    color:#fff;
    margin:0;
    padding:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  }
  header {
    padding:12px 16px;
    border-bottom:2px solid #b30000;
    display:flex;
    align-items:center;
    gap:12px;
    background:#050505;
    position:sticky;
    top:0;
  }
  header img {
    height:42px;
    border-radius:6px;
  }
  header span {
    font-size:1.1rem;
    font-weight:700;
  }

  .wrap {
    max-width:520px;
    margin:0 auto;
    padding:20px;
  }

  h1 {
    text-align:center;
    font-size:1.8rem;
    margin-bottom:6px;
    color:#ff1a1a;
  }
  .tagline {
    text-align:center;
    color:#ccc;
    font-size:.95rem;
    margin-bottom:25px;
  }

  .profile-box {
    background:#111;
    border:1px solid #222;
    border-radius:10px;
    padding:18px;
    margin-bottom:25px;
  }
  .profile-row {
    margin-bottom:12px;
    font-size:.95rem;
  }
  .profile-label {
    font-size:.8rem;
    color:#888;
  }
  .profile-value {
    margin-top:2px;
  }

  .btn-stack {
    display:flex;
    flex-direction:column;
    gap:14px;
  }
  .btn-big {
    padding:14px 0;
    text-align:center;
    font-weight:700;
    font-size:1.1rem;
    border-radius:10px;
    cursor:pointer;
    text-decoration:none;
    display:block;
  }
  .btn-primary {
    background:linear-gradient(180deg,#b30000,#7a0000);
    border:1px solid #ff1a1a;
    color:#fff;
  }
  .btn-secondary {
    background:#111;
    border:1px solid #444;
    color:#fff;
  }
  .btn-logout {
    background:#222;
    border:1px solid #333;
    color:#bbb;
    margin-top:10px;
  }
</style>

</head>
<body>

<header>
  <img src="/icon.PNG" alt="Big Red Logo">
  <span>Rider Hub</span>
</header>

<div class="wrap">

  <h1>Your Rider Hub</h1>
  <p class="tagline">Manage your profile, request flat-rate rides, and track your active connection.</p>

  <div id="profileBox" class="profile-box">
    Loading profile‚Ä¶
  </div>

  <div class="btn-stack">
    <a href="/rider/ride-request.html" class="btn-big btn-primary">üìù Request a Ride</a>
    <a href="/rider/myride.html" class="btn-big btn-secondary">üìç View My Ride</a>
    <button id="logoutBtn" class="btn-big btn-logout">üö™ Log Out</button>
  </div>

</div>

<script>
  /* Protect Page */
  const raw = localStorage.getItem("bigred_rider_profile_v1");
  if (!raw) {
    window.location.href = "/rider-login.html?next=hub";
  }

  const profile = raw ? JSON.parse(raw) : null;
  const profileBox = document.getElementById("profileBox");

  function renderProfile() {
    if (!profile) {
      profileBox.innerHTML = "<p style='color:#aaa;text-align:center;'>No profile found.</p>";
      return;
    }

    profileBox.innerHTML = `
      <div class="profile-row">
        <div class="profile-label">Name</div>
        <div class="profile-value">${profile.name || "<i style='color:#555'>Not set</i>"}</div>
      </div>

      <div class="profile-row">
        <div class="profile-label">Mobile</div>
        <div class="profile-value">${profile.phone}</div>
      </div>

      <div class="profile-row">
        <div class="profile-label">Home / Usual Pickup</div>
        <div class="profile-value">${profile.home || "<i style='color:#555'>Not set</i>"}</div>
      </div>
    `;
  }

  renderProfile();

  /* Logout */
  document.getElementById("logoutBtn").addEventListener("click", () => {
    localStorage.removeItem("bigred_rider_profile_v1");
    localStorage.removeItem("bigred_rider_id");
    window.location.href = "/rider-login.html";
  });
</script>

</body>
</html>